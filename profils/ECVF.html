<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>ECVF â€” Le connecteur expressif</title>
  <link rel="icon" href="../favicon.ico">
  <style>
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;margin:0;background:#0b1220;color:#e5e7eb}
    .wrap{max-width:900px;margin:0 auto;padding:16px}
    .banner img{display:block;max-width:520px;height:auto;margin:12px auto 4px}
    .card{background:#111827;border:1px solid #223047;border-radius:12px;padding:16px;margin:16px 0;}
    .btn{border:1px solid #2e3748;background:#0b1220;color:#e5e7eb;padding:10px 14px;border-radius:10px;cursor:pointer}
    h1{margin:0 0 8px;font-size:28px}
    .muted{color:#9aa3b2}
  </style>
</head>
<body>
<div class="wrap">
  <div class="banner"><img src="../assets/bandeau.jpg" alt="AcadÃ©mie de Performances â€” Alexandre Griffet"></div>
  <div class="card">
    <h1>ECVF â€” Le connecteur expressif</h1>
    <div class="muted">AcadÃ©mie de Performances â€” Rapport dÃ©taillÃ©</div>
    <div style="margin-top:8px">
      <a class="btn" href="../index.html">â†© Reprendre le questionnaire</a>
      <button class="btn" id="exportPdf">Exporter en PDF</button>
    </div>
  </div>
  <div class="card" id="report">
<h2>Introduction</h2>
<p>Texte dâ€™introduction pour ECVF â€” Le connecteur expressif. (Remplacez par votre contenu validÃ©.)</p>
<h3>Forces â€” Professionnel</h3>
<p>Contenu forces proâ€¦</p>
<h3>Forces â€” Familial</h3>
<p>Contenu forces familialâ€¦</p>
<h3>Forces â€” Communication</h3>
<p>Contenu communicationâ€¦</p>
<h3>Points de vigilance</h3>
<p>Contenu vigilanceâ€¦</p>
<h3>Axes de progression</h3>
<p>Contenu progressionâ€¦</p>
<h3>Illustrations inspirantes</h3>
<p>Contenu illustrationsâ€¦</p>
<h3>ðŸ§° 3 clÃ©s de performance</h3>
<ul><li>ClÃ© 1â€¦</li><li>ClÃ© 2â€¦</li><li>ClÃ© 3â€¦</li></ul>

  </div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script>
document.getElementById('exportPdf').addEventListener('click', async ()=>{
  const { jsPDF } = window.jspdf;
  const doc = new jsPDF('p','mm','a4');
  const banner = document.querySelector('.banner');
  let canvas = await html2canvas(banner, {scale:2, useCORS:true});
  let img = canvas.toDataURL('image/jpeg','1.0');
  doc.addImage(img,'JPEG',15,10,180,0);
  doc.setFontSize(18); doc.text('ECVF â€” Le connecteur expressif', 15, 70);
  const params = new URLSearchParams(location.search);
  const pid = params.get('pid') || 'anonyme';
  const ctx = params.get('ctx') || '';
  const date = params.get('date') || '';
  doc.setFontSize(12);
  doc.text('Participant : '+pid, 15, 86);
  doc.text('Contexte : '+ctx, 15, 94);
  doc.text('Date : '+date, 15, 102);
  doc.addPage();
  canvas = await html2canvas(document.getElementById('report'), {scale:2, useCORS:true});
  img = canvas.toDataURL('image/jpeg','1.0');
  doc.addImage(img,'JPEG',10,10,190,0);
  doc.save('PMP_'+ 'ECVF' +'_'+pid+'_'+date+'.pdf');
});
</script>
</body>
</html>